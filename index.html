<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>SWD</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400" rel="stylesheet" /> <!-- https://fonts.google.com/ -->
    <link href="css/bootstrap.min.css" rel="stylesheet" /> <!-- https://getbootstrap.com/ -->
    <link href="fontawesome/css/all.min.css" rel="stylesheet" /> <!-- https://fontawesome.com/ -->
    <link href="css/templatemo-diagoona.css" rel="stylesheet" />
</head>
<style>
  .tm-bg {
    min-height: 100%; /* 100% of the viewport height */
    display: flex;
}
  a.tm-nav-link {
      z-index: 13;
  }
  .tm-content-button {
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    height: 110px; /* Adjust height as needed */
}
  .tm-content button {
    padding: 10px 20px;
    font-size: 10px;
    background-color: #0a509b;
    opacity: 1;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    vertical-align: middle;
    align-items: center;
    justify-content: right;
    text-align: center;
    margin-left: 100;
    background: linear-gradient(to right, #007BFF 100%, #d6d6d6 0%);
    background-repeat: no-repeat;
    transition: background 0.2s;
  }
  .tm-content button:disabled {
    background-color: #d6d6d6;
    cursor: not-allowed;
  }
  button:hover:not(:disabled) {
    background-color: #0056b3;
  }
</style>
<body>
    <div class="tm-container">        
        <div>
            <div class="tm-row pt-4">
                <div class="tm-col-left">
                    <div class="tm-site-header media">
                        <i class="fas fa-umbrella-beach fa-3x mt-1 tm-logo"></i>
                        <div class="media-body">
                            <h1 class="tm-sitename text-uppercase">SWD</h1>
                            <p class="tm-slogon"></p>
                        </div>        
                    </div>
                </div>
                <div class="tm-col-right">
                    <nav class="navbar navbar-expand-lg" id="tm-main-nav">
                        <button class="navbar-toggler toggler-example mr-0 ml-auto" type="button" 
                            data-toggle="collapse" data-target="#navbar-nav" 
                            aria-controls="navbar-nav" aria-expanded="false" aria-label="Toggle navigation">
                            <span><i class="fas fa-bars"></i></span>
                        </button>
                        <div class="collapse navbar-collapse tm-nav" id="navbar-nav">
                            <ul class="navbar-nav text-uppercase">
                                <li class="nav-item active">
                                    <a class="nav-link tm-nav-link" href="#" z-index="13">Home <span class="sr-only">(current)</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link tm-nav-link" href="Weather.html">Weather</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link tm-nav-link" href="services.html">Services</a>
                                </li>                            
                                <li class="nav-item">
                                    <a class="nav-link tm-nav-link" href="contact.html">Contact</a>
                                </li>
                            </ul>                            
                        </div>                        
                    </nav>
                </div>
            </div>
            
            <div class="tm-row">
                <div class="tm-col-left"></div>
                <main class="tm-col-right">
                    <section class="tm-content">
                        <h2 class="mb-5 tm-content-title">WEATHER</h2>
                        <a class="weatherwidget-io" href="https://forecast7.com/en/39d95n75d17/philadelphia/?unit=us" data-label_1="PHILADELPHIA" data-label_2="WEATHER" data-font="Roboto" data-icons="Climacons Animated" data-theme="dark" data-highcolor="#ffa7a7" data-lowcolor="#b8f8ff" 
                        style="position: absolute; top: 0; left: 0; z-index: -1;">PHILADELPHIA WEATHER</a>
                        
                        <p class="mb-5"></p>
                        <hr class="mb-5">
                        <h2 class="mb-5 tm-content-title" >RIVER DATA</h2>
                        <svg class="river-data-svg"xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 113">
                            <defs>
                              <style>
                                
                                .cls-1 {
                                  fill: #9cd0e5;
                                }
                          
                                .cls-2 {
                                  isolation: isolate;
                                }
                          
                                .cls-3, .cls-4, .cls-5 {
                                  fill: #fff;
                                }
                          
                                .cls-4 {
                                  font-size: 30px;
                                }
                          
                                .cls-4, .cls-5 {
                                    font-family: access-mn, sans-serif;
                                    font-style: normal;
                                    font-weight: 500;
                                }
                          
                                .cls-5 {
                                  font-size: 10px;
                                }
                          
                                .cls-6 {
                                  opacity: .58;
                                }
                          
                                .cls-7 {
                                  mix-blend-mode: overlay;
                                  opacity: .25;
                                }
                          
                                .cls-8 {
                                  letter-spacing: -.07em;
                                }
                          
                                .cls-9 {
                                  fill: #4e8ed8;
                                }
                          
                                .cls-10 {
                                  fill: #001072;
                                }
                          
                                .cls-11 {
                                  letter-spacing: .02em;
                                }
                          
                                .cls-12 {
                                  letter-spacing: .02em;
                                }
                          
                                .cls-13 {
                                  letter-spacing: .02em;
                                }
                              </style>
                            </defs>
                                <g>
                                  <text class="cls-5" transform="translate(390 20)" x="5%" y="0" text-anchor="middle" dominant-baseline="middle" font-family="access-mn, sans-serif" font-style="normal" font-weight="500">HEIGHT</text>
                                  <text class="cls-4" transform="translate(390 45)" id="R-Height" x="5%" y="0" text-anchor="middle" dominant-baseline="middle">HEIGHT</text>
                                </g>
                                <g>
                                  <text class="cls-5" transform="translate(225 20)" x="5%" y="0" text-anchor="middle" dominant-baseline="middle">WATER TEMP</text>
                                  <text class="cls-4" transform="translate(225 45)" id="R-Temp" x="5%" y="0" text-anchor="middle" dominant-baseline="middle">TEMP</text>
                                </g>
                                <g>
                                  <text class="cls-5" transform="translate(55 20)" x="5%" y="0" text-anchor="middle" dominant-baseline="middle">DISCHARGE</text>
                                  <text class="cls-4" transform="translate(55 45)" id="R-Discharge" x="5%" y="0" text-anchor="middle" dominant-baseline="middle">DISCHARGE</text>
                                </g>
                          </svg>
                          <svg class="wind-data-svg"xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 113">
                            <defs>
                              <style>
                                
                                .cls-1 {
                                  fill: #9cd0e5;
                                }
                          
                                .cls-2 {
                                  isolation: isolate;
                                }
                          
                                .cls-3, .cls-4, .cls-5 {
                                  fill: #fff;
                                }
                          
                                .cls-4 {
                                  font-size: 30px;
                                }
                          
                                .cls-4, .cls-5 {
                                    font-family: access-mn, sans-serif;
                                    font-style: normal;
                                    font-weight: 500;
                                }
                          
                                .cls-5 {
                                  font-size: 10px;
                                }
                          
                                .cls-6 {
                                  opacity: .58;
                                }
                          
                                .cls-7 {
                                  mix-blend-mode: overlay;
                                  opacity: .25;
                                }
                          
                                .cls-8 {
                                  letter-spacing: -.07em;
                                }
                          
                                .cls-9 {
                                  fill: #4e8ed8;
                                }
                          
                                .cls-10 {
                                  fill: #001072;
                                }
                          
                                .cls-11 {
                                  letter-spacing: .02em;
                                }
                          
                                .cls-12 {
                                  letter-spacing: .02em;
                                }
                          
                                .cls-13 {
                                  letter-spacing: .02em;
                                }
                              </style>
                            </defs>
                                <g>
                                  <text class="cls-5" transform="translate(390 20)" x="5%" y="0" text-anchor="middle" dominant-baseline="middle" font-family="access-mn, sans-serif" font-style="normal" font-weight="500">Wind Speed</text>
                                  <text class="cls-4" transform="translate(390 45)" id="R-WindSpeed" x="5%" y="0" text-anchor="middle" dominant-baseline="middle">Wind Speed</text>
                                </g>
                                <g>
                                  <text class="cls-5" transform="translate(225 20)" x="5%" y="0" text-anchor="middle" dominant-baseline="middle">GUSTS</text>
                                  <text class="cls-4" transform="translate(225 45)" id="R-Gusts" x="5%" y="0" text-anchor="middle" dominant-baseline="middle">Gusts</text>
                                </g>
                                <g>
                                  <text class="cls-5" transform="translate(55 20)" x="5%" y="0" text-anchor="middle" dominant-baseline="middle">DIRECTION</text>
                                  <text class="cls-4" transform="translate(55 45)" id="R-Direction" x="5%" y="0" text-anchor="middle" dominant-baseline="middle">Direction</text>
                                </g>
                          </svg>
                          <div class="tm-content-button">
                            <button id="fetchButton">Fetch Current Wind Data</button>
                          </div>

                    </section>
                </main>
            </div>
        </div>        

        <div class="tm-row">
            <div class="tm-col-left text-center">            
                <ul class="tm-bg-controls-wrapper">
                    <li class="tm-bg-control active" data-id="0"></li>
                    <li class="tm-bg-control" data-id="1"></li>
                    <li class="tm-bg-control" data-id="2"></li>
                </ul>            
            </div>        
            <div class="tm-col-right tm-col-footer">
                <footer class="tm-site-footer text-right">
                    <p class="mb-0"><a rel="nofollow" target="_parent" href="https://templatemo.com" class="tm-text-link"></a></p>
                </footer>
            </div>  
        </div>

        <!-- Diagonal background design -->
        <div class="tm-bg">
            <div class="tm-bg-left"></div>
            <div class="tm-bg-right"></div>
        </div>
    </div>
    <script src="js/scripts.js"></script>
    <script src="js/jquery-3.4.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.backstretch.min.js"></script>
    <script src="js/templatemo-script.js"></script>
    <script>fetchWaterData()</script>
    <script>
        !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='https://weatherwidget.io/js/widget.min.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','weatherwidget-io-js');
    </script>
    <script>
    // Call the function
      getAverageWindDataBoathouseRow()
    
    
    </script>
    <script>
      async function getCurrentWindDataHr(lat, lon) {
        try {
            // Step 1: Get the nearest observation station
            const pointResponse = await fetch(`https://api.weather.gov/points/${lat},${lon}`);
            if (!pointResponse.ok) throw new Error('Failed to fetch station information');
            const pointData = await pointResponse.json();
            const stationUrl = pointData.properties.observationStations;
    
            // Step 2: Fetch the nearest station's data
            const stationListResponse = await fetch(stationUrl);
            if (!stationListResponse.ok) throw new Error('Failed to fetch station list');
            const stationList = await stationListResponse.json();
            const nearestStation = stationList.features[0].id; // Get the first station
    
            // Step 3: Fetch the latest observation from the nearest station
            const observationResponse = await fetch(`${nearestStation}/observations/latest`);
            if (!observationResponse.ok) throw new Error('Failed to fetch latest observation');
            const observationData = await observationResponse.json();
    
            // Step 4: Extract wind data
            const windSpeed = observationData.properties.windSpeed.value; // in m/s
            const windGust = observationData.properties.windGust?.value; // in m/s
            const windDirection = observationData.properties.windDirection.value; // in degrees
    
            // Convert wind speed to km/h
            const windSpeedKmH = windSpeed ? (windSpeed * 3.6).toFixed(2) : null;
            const windGustKmH = windGust ? (windGust * 3.6).toFixed(2) : null;
    
            console.log(`Wind Speed: ${windSpeedKmH || 'N/A'} km/h`);
            console.log(`Wind Gust: ${windGustKmH || 'N/A'} km/h`);
            console.log(`Wind Direction: ${windDirection || 'N/A'}°`);
    
            return { windSpeed: windSpeedKmH, windGust: windGustKmH, windDirection };
        } catch (error) {
            console.error('Error fetching current wind data:', error);
            return { windSpeed: null, windGust: null, windDirection: null };
        }
    }
    
    // Call the function with coordinates for Boathouse Row, Philadelphia
    getCurrentWindDataHr(39.9676, -75.1834);
    </script>
    <script>
      async function getCurrentWindData() {
        const apiUrl = "https://api.open-meteo.com/v1/forecast?latitude=39.9696&longitude=-75.1876&current=temperature_2m,relative_humidity_2m,apparent_temperature,precipitation,wind_speed_10m,wind_direction_10m,wind_gusts_10m&hourly=uv_index&temperature_unit=fahrenheit&wind_speed_unit=mph&timezone=America%2FNew_York";
        const latitude = 39.9696; // Latitude for Boathouse Row, Philadelphia
        const longitude = -75.1876; // Longitude for Boathouse Row, Philadelphia
        const parameters = [
            "current_weather=true",
            "latitude=" + latitude,
            "longitude=" + longitude,
            "wind_speed_unit=mph", // Use mph as the wind speed unit
            "timezone=America/New_York"
        ];
    
        try {
            // Construct the full API URL with parameters
            const url = `${apiUrl}`;
            
            // Fetch data from the API
            const response = await fetch(url);
            if (!response.ok) throw new Error("Failed to fetch wind data");
    
            // Parse the JSON response
            const data = await response.json();
            console.log(data);
            // Extract current weather details
            const currentWeather = data.current;
            const windSpeed = currentWeather.wind_speed_10m; // Wind speed in mph
            const windGust = currentWeather.wind_gusts_10m || "N/A"; // Wind gusts in mph, if available
            const windDirection = currentWeather.wind_direction_10m || "N/A";
            
            console.log(`Wind Direction: ${windDirection || 'N/A'}°`);
            console.log(`Current Wind Speed: ${windSpeed} mph`);
            console.log(`Current Wind Gust Speed: ${windGust} mph`);
            document.getElementById("R-WindSpeed").textContent = `${windSpeed} mph`;
            document.getElementById("R-Gusts").textContent = `${windGust || 'N/A'} mph`;
            document.getElementById("R-Direction").textContent = `${windDirection || 'N/A'}°`;
            return { windSpeed, windGust };
        } catch (error) {
            console.error("Error fetching wind data:", error);
            return { windSpeed: null, windGust: null };
        }
    }

    function handleCooldown(button, cooldownTime) {
      let remainingTime = cooldownTime;
      const totalTime = cooldownTime;

      // Disable the button
      button.disabled = true;

      const interval = setInterval(() => {
          remainingTime--;

          // Calculate percentage filled
          const percentage = ((totalTime - remainingTime) / totalTime) * 100;

          // Update the button's background gradient
          button.style.background = `linear-gradient(to right, #007BFF ${percentage}%, #d6d6d6 ${percentage}%)`;

          if (remainingTime <= 0) {
              clearInterval(interval);
              button.disabled = false;
              button.style.background = "linear-gradient(to right, #007BFF 100%, #007BFF 100%)";
              button.textContent = "Fetch Current Wind Data";
          } else {
              button.textContent = `Cooldown: ${remainingTime}s`;
          }
      }, 1000);
  }

  // Add event listener to the button
  const fetchButton = document.getElementById("fetchButton");
  fetchButton.addEventListener("click", () => {
      getCurrentWindData();
      handleCooldown(fetchButton, 300); // 300 seconds = 5 minutes
  });
    // Call the function to get the current wind data
    <!-- getCurrentWindData(); -->
    </script>
</body>
</html>